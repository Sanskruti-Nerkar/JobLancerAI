<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JobLancer ‚Äì Agentic AI Job Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1220;--card:#0f1724;--muted:#9aa6bb;--accent1:#4f9cf7;--accent2:#7b61ff;--accent3:#ff6b81;--accent4:#26d07b;--glass:rgba(255,255,255,0.05);--radius:14px;--ease:cubic-bezier(.16,.84,.24,1);color-scheme:dark;
    }
    body.light{
      --bg:#f8f9fc;--card:#ffffff;--muted:#64748b;--glass:rgba(0,0,0,0.08);color-scheme:light;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui;-webkit-font-smoothing:antialiased;line-height:1.5;background:radial-gradient(circle at 20% 30%,#101c33,#050812 90%);color:#eaf2ff;overflow-x:hidden;transition:background 0.5s ease,color 0.5s ease}
    body.light{background:radial-gradient(circle at 20% 30%,#e8ecf5,#f0f4f8 90%);color:#1e293b}

    .intro{position:fixed;inset:0;display:grid;place-items:center;background:radial-gradient(circle at 20% 30%, #101c33, #050812 90%);z-index:9999;animation:bgFade 3s forwards}
    body.light .intro{background:radial-gradient(circle at 20% 30%, #e8ecf5, #f0f4f8 90%)}
    .intro::before{content:'';position:absolute;inset:0;background:rgba(0,0,0,0.3);backdrop-filter:blur(8px);z-index:0}
    body.light .intro::before{background:rgba(255,255,255,0.2)}
    @keyframes bgFade{0%{opacity:1}90%{opacity:1}100%{opacity:0;visibility:hidden}}
    
    .logo-pop{
      width:320px;
      height:320px;
      opacity:0;
      animation:logoEntrance 2.2s 0.2s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
      filter:drop-shadow(0 0 25px rgba(79,156,247,0.7)) drop-shadow(0 0 50px rgba(123,97,255,0.5)) drop-shadow(0 0 75px rgba(255,107,129,0.3));
      position:relative;
      z-index:2;
    }
    
    .logo-pop::before{
      content:'';
      position:absolute;
      inset:-40px;
      background:radial-gradient(circle, rgba(79,156,247,0.2) 0%, rgba(123,97,255,0.15) 35%, rgba(255,107,129,0.1) 60%, transparent 75%);
      border-radius:50%;
      z-index:-1;
      animation:logoGlow 4s ease-in-out infinite;
    }
    
    @keyframes logoGlow{
      0%, 100%{transform:scale(1);opacity:0.75}
      50%{transform:scale(1.08);opacity:0.9}
    }
    
    @keyframes logoEntrance{
      0%{
        transform:translateY(20px);
        opacity:0;
        filter:drop-shadow(0 0 0 rgba(79,156,247,0)) drop-shadow(0 0 0 rgba(123,97,255,0)) drop-shadow(0 0 0 rgba(255,107,129,0)) blur(8px);
      }
      60%{
        transform:translateY(-5px);
        opacity:0.95;
        filter:drop-shadow(0 0 28px rgba(79,156,247,0.75)) drop-shadow(0 0 55px rgba(123,97,255,0.55)) drop-shadow(0 0 80px rgba(255,107,129,0.35)) blur(0);
      }
      100%{
        transform:translateY(0);
        opacity:1;
        filter:drop-shadow(0 0 25px rgba(79,156,247,0.7)) drop-shadow(0 0 50px rgba(123,97,255,0.5)) drop-shadow(0 0 75px rgba(255,107,129,0.3));
      }
    }
    
    .intro-glow{
      position:absolute;
      width:550px;
      height:550px;
      background:radial-gradient(circle, rgba(79,156,247,0.22) 0%, rgba(123,97,255,0.18) 30%, rgba(255,107,129,0.12) 55%, rgba(79,156,247,0.08) 70%, transparent 80%);
      border-radius:50%;
      animation:glowPulse 3.5s ease-in-out infinite;
      pointer-events:none;
      z-index:1;
    }
    
    @keyframes glowPulse{
      0%, 100%{transform:scale(0.95);opacity:0.7}
      50%{transform:scale(1.15);opacity:0.85}
    }

    .ticker{background:linear-gradient(90deg,rgba(255,255,255,0.1),rgba(255,255,255,0.03));padding:8px 12px;color:var(--muted);white-space:nowrap;overflow:hidden;position:sticky;top:0;z-index:2;transition:background 0.3s ease}
    body.light .ticker{background:linear-gradient(90deg,rgba(0,0,0,0.05),rgba(0,0,0,0.02))}
    .ticker span{display:inline-block;animation:marquee 14s linear infinite}
    @keyframes marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}

    header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;position:sticky;top:0;background:rgba(0,0,0,0.3);backdrop-filter:blur(8px);z-index:2;transition:background 0.3s ease}
    body.light header{background:rgba(255,255,255,0.7);border-bottom:1px solid rgba(0,0,0,0.05)}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .logo{
      width:72px;
      height:72px;
      display:grid;
      place-items:center;
      transition:transform 0.3s ease;
      cursor:pointer;
      position:relative;
      padding:0;
      background:transparent;
      box-shadow:none;
    }
    .brand .logo img{
      width:100%;
      height:100%;
      object-fit:contain;
      filter:drop-shadow(0 2px 8px rgba(79,156,247,0.4)) drop-shadow(0 0 15px rgba(123,97,255,0.3));
      transition:filter 0.3s ease;
    }
    .brand .logo:hover{
      transform:scale(1.1) rotate(5deg);
    }
    .brand .logo:hover img{
      filter:drop-shadow(0 4px 12px rgba(79,156,247,0.6)) drop-shadow(0 0 20px rgba(123,97,255,0.5));
    }
    .brand h1{font-size:20px;font-weight:700;background:linear-gradient(135deg, #4f9cf7, #7b61ff, #ff6b81);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

    nav a{color:var(--muted);text-decoration:none;margin:0 10px;font-weight:600;transition:color .3s}
    nav a:hover{color:var(--accent1)}
    body.light nav a:hover{color:var(--accent2)}
    .controls{display:flex;align-items:center;gap:10px}
    .theme-toggle{width:42px;height:42px;border-radius:50%;background:var(--glass);display:grid;place-items:center;cursor:pointer;transition:all 0.4s cubic-bezier(.16,.84,.24,1);border:1px solid rgba(255,255,255,0.1);font-size:20px;position:relative;overflow:hidden}
    body.light .theme-toggle{border-color:rgba(0,0,0,0.1)}
    .theme-toggle:hover{transform:rotate(180deg) scale(1.1);background:rgba(79,156,247,0.2)}
    body.light .theme-toggle:hover{background:rgba(123,97,255,0.15)}
    .theme-toggle::before{content:'üåô';position:absolute;transition:opacity 0.3s ease,transform 0.3s ease}
    body.light .theme-toggle::before{content:'‚òÄÔ∏è';opacity:1}
    body:not(.light) .theme-toggle::before{opacity:1}
    .btn{padding:10px 16px;border:none;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;font-weight:700;cursor:pointer;transition:transform .2s}
    .btn:hover{transform:scale(1.05)}
    .btn:disabled{opacity:0.5;cursor:not-allowed}

    main{max-width:1100px;margin:40px auto;padding:20px;display:flex;flex-direction:column;gap:40px}
    section{background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,0.4);transition:transform .4s,box-shadow .4s,background .3s ease}
    body.light section{background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(255,255,255,0.4));box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid rgba(0,0,0,0.05)}
    section:hover{transform:translateY(-5px);box-shadow:0 20px 50px rgba(0,0,0,0.5)}
    body.light section:hover{box-shadow:0 8px 30px rgba(0,0,0,0.12)}

    #about p{color:var(--muted);margin-top:10px}
    textarea,input[type=text],input[type=number]{width:100%;border:none;border-radius:10px;padding:10px;background:rgba(255,255,255,0.05);color:inherit;margin-top:6px;transition:background 0.3s ease,border 0.3s ease}
    body.light textarea,body.light input[type=text],body.light input[type=number]{background:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.1);color:#1e293b}
    .upload-box{border:2px dashed rgba(255,255,255,0.1);padding:30px;text-align:center;border-radius:14px;transition:all .3s ease;cursor:pointer}
    body.light .upload-box{border-color:rgba(0,0,0,0.15);background:rgba(0,0,0,0.02)}
    .upload-box.drag{background:rgba(79,156,247,0.1);border-color:var(--accent1);transform:scale(1.02)}
    body.light .upload-box.drag{background:rgba(79,156,247,0.15);border-color:var(--accent1)}
    form{display:flex;flex-direction:column;gap:20px;margin-top:20px}
    .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}
    .field label{font-size:14px;margin-bottom:4px;color:var(--muted)}
    .field input,.field select{border:1px solid rgba(255,255,255,0.05)}
    .status-card{border:1px solid rgba(255,255,255,0.1);border-radius:14px;padding:18px;background:rgba(255,255,255,0.02);margin-top:20px;transition:background 0.3s ease,border 0.3s ease}
    body.light .status-card{border-color:rgba(0,0,0,0.1);background:rgba(0,0,0,0.02)}
    .status-card[data-variant="error"]{border-color:#ff6b81;background:rgba(255,107,129,0.08)}
    .status-card[data-variant="success"]{border-color:#26d07b;background:rgba(38,208,123,0.08)}
    .status-card[data-variant="waiting"]{border-color:#ffa500;background:rgba(255,165,0,0.08)}
    .status-card h3{margin-bottom:6px;font-size:18px}
    .status-card ul{margin:10px 0 0 20px;color:var(--muted)}
    .hidden{display:none!important}
    
    .progress-bar{width:100%;height:4px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;margin:12px 0}
    .progress-bar-fill{height:100%;background:linear-gradient(90deg,#4f9cf7,#7b61ff);transition:width 0.5s ease}
    
    .confirm-btn{background:#26d07b;margin-top:12px;width:100%;padding:12px;border:none;border-radius:10px;color:white;font-weight:700;cursor:pointer;transition:all .3s}
    .confirm-btn:hover{background:#20b66a;transform:scale(1.02)}
    
    #results{display:flex;flex-direction:column;gap:24px;margin-top:24px}
    .results-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
    .match-card{padding:18px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0));border:1px solid rgba(255,255,255,0.05);box-shadow:0 10px 30px rgba(0,0,0,0.4);position:relative;transition:background 0.3s ease,border 0.3s ease,box-shadow 0.3s ease}
    body.light .match-card{background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.6));border-color:rgba(0,0,0,0.08);box-shadow:0 4px 15px rgba(0,0,0,0.08)}
    .match-card.applied{border-color:#26d07b;background:linear-gradient(180deg,rgba(38,208,123,0.1),rgba(38,208,123,0.02))}
    .match-card.applying{border-color:#ffa500;background:linear-gradient(180deg,rgba(255,165,0,0.1),rgba(255,165,0,0.02))}
    .match-card h3{margin-bottom:6px}
    .match-card p{color:var(--muted);font-size:14px;margin:4px 0}
    .scores{margin-top:12px;font-size:14px}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .chip{padding:4px 10px;border-radius:999px;background:rgba(255,255,255,0.08);font-size:12px}
    .resume-summary{border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:18px;background:rgba(255,255,255,0.02);transition:background 0.3s ease,border 0.3s ease}
    body.light .resume-summary{border-color:rgba(0,0,0,0.1);background:rgba(0,0,0,0.02)}
    .file-hint{font-size:14px;color:var(--muted);margin-top:8px}
    
    .apply-section{border:1px solid rgba(79,156,247,0.4);border-radius:16px;padding:24px;background:rgba(79,156,247,0.08);margin-top:24px;transition:background 0.3s ease,border 0.3s ease}
    body.light .apply-section{border-color:rgba(79,156,247,0.3);background:rgba(79,156,247,0.12)}
    .apply-section h3{margin-bottom:16px}
    .apply-controls{display:flex;gap:16px;align-items:end;flex-wrap:wrap}
    .apply-controls .field{flex:1;min-width:200px}
    .apply-controls button{flex-shrink:0}
    
    .application-progress{margin-top:16px}
    .job-apply-status{padding:8px 12px;margin:4px 0;border-radius:8px;background:rgba(255,255,255,0.05);display:flex;justify-content:space-between;align-items:center}
    .job-apply-status.success{background:rgba(38,208,123,0.1);border-left:3px solid #26d07b}
    .job-apply-status.failed{background:rgba(255,107,129,0.1);border-left:3px solid #ff6b81}
    .job-apply-status.applying{background:rgba(255,165,0,0.1);border-left:3px solid #ffa500}
    .job-apply-status.waiting{background:rgba(79,156,247,0.1);border-left:3px solid #4f9cf7}
    
    .questions-modal{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:10000;display:none;place-items:center;backdrop-filter:blur(8px)}
    .questions-modal.show{display:grid}
    .questions-content{background:var(--card);border:2px solid #ffa500;border-radius:16px;padding:32px;max-width:600px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.6);animation:modalPop 0.3s ease}
    @keyframes modalPop{0%{transform:scale(0.9);opacity:0}100%{transform:scale(1);opacity:1}}
    .questions-content h2{color:#ffa500;margin-bottom:16px;font-size:24px}
    .questions-content p{color:var(--muted);margin:12px 0;line-height:1.6}
    .questions-content .job-info{background:rgba(255,165,0,0.1);padding:12px;border-radius:8px;margin:16px 0}
    .questions-content button{width:100%;margin-top:20px;padding:14px;background:#ffa500;border:none;border-radius:10px;color:white;font-weight:700;font-size:16px;cursor:pointer;transition:all .3s}
    .questions-content button:hover{background:#ff8c00;transform:scale(1.02)}
    .questions-content ol{margin-left:20px;color:var(--muted)}
    .questions-content ol li{margin:8px 0}
    
    .apply-badge{position:absolute;top:10px;right:10px;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:700}
    .apply-badge.will-apply{background:#4f9cf7;color:white}
    .apply-badge.applied{background:#26d07b;color:white}
    .apply-badge.applying{background:#ffa500;color:white}
    .apply-badge.failed{background:#ff6b81;color:white}
    
    footer{text-align:center;padding:20px;color:var(--muted);transition:color 0.3s ease}
    .reveal{opacity:0;transform:translateY(20px);transition:all .8s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}
    .contact-card{padding:20px;background:rgba(255,255,255,0.02);border-radius:12px;border:1px solid rgba(255,255,255,0.1);transition:background 0.3s ease,border 0.3s ease}
    body.light .contact-card{background:rgba(0,0,0,0.02);border-color:rgba(0,0,0,0.1)}
    
    /* Sidebar Styles */
    .sidebar-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(4px);z-index:10000;opacity:0;visibility:hidden;transition:opacity 0.3s ease,visibility 0.3s ease}
    .sidebar-overlay.show{opacity:1;visibility:visible}
    .sidebar{position:fixed;top:0;right:-450px;width:450px;max-width:90vw;height:100vh;background:var(--card);box-shadow:-10px 0 40px rgba(0,0,0,0.5);z-index:10001;transition:right 0.4s cubic-bezier(.16,.84,.24,1),background 0.3s ease,box-shadow 0.3s ease;overflow-y:auto;padding:0}
    body.light .sidebar{box-shadow:-10px 0 40px rgba(0,0,0,0.15);border-left:1px solid rgba(0,0,0,0.05)}
    .sidebar.open{right:0}
    .sidebar-header{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:1px solid rgba(255,255,255,0.1);position:sticky;top:0;background:var(--card);z-index:10}
    .sidebar-header h2{font-size:24px;background:linear-gradient(135deg, #4f9cf7, #7b61ff, #ff6b81);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}
    .sidebar-close{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,0.1);border:none;color:inherit;font-size:20px;cursor:pointer;display:grid;place-items:center;transition:all 0.3s ease}
    .sidebar-close:hover{background:rgba(255,107,129,0.2);transform:rotate(90deg)}
    .sidebar-content{padding:24px}
    .sidebar-content .tagline{font-size:20px;font-weight:700;color:#4f9cf7;margin-bottom:24px;line-height:1.4}
    .sidebar-content p{color:var(--muted);line-height:1.8;margin-bottom:20px;font-size:15px}
    .sidebar-content p:last-child{margin-bottom:0}
    @media (max-width:768px){.sidebar{width:100vw;right:-100vw}}
  </style>
</head>
<body>
  <div class="intro">
    <div class="intro-glow"></div>
    <img src="joblancer-logo.png" alt="JobLancer Logo" class="logo-pop">
  </div>
  
  <div class="ticker"><span>New job recommendations generated. Review your matches and proceed to applications.</span></div>
  
  <header>
    <div class="brand">
      <div class="logo">
        <img src="joblancer-logo.png" alt="JobLancer Logo">
      </div>
      <h1>JobLancer</h1>
    </div>
    <nav>
      <a href="#" id="aboutLink">About</a>
      <a href="#upload">Upload Resume</a>
      <a href="#contact" id="contactLink">Contact Us</a>
    </nav>
    <div class="controls">
      <div class="theme-toggle" id="themeToggle"></div>
      <button class="btn">Get Started</button>
    </div>
  </header>

  <!-- Sidebar -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>About JobLancer</h2>
      <button class="sidebar-close" id="sidebarClose">‚úï</button>
    </div>
    <div class="sidebar-content">
      <p class="tagline">JobLancer ‚Äî Your AI-Powered Shortcut to Smarter Job Applications.</p>
      <p>JobLancer is your personal AI-powered job-search partner, built to remove the stress, confusion, and repetition from finding the right job. Instead of spending hours scrolling through job portals, comparing descriptions, and guessing which roles fit your profile, JobLancer does the heavy lifting for you.</p>
      <p>The system begins by understanding you‚Äîit reads your resume, identifies your skills, experience, and strengths, and builds an accurate profile of what you're truly suited for. Using this information, JobLancer automatically scans platforms like Naukri and LinkedIn, pulling in relevant job openings in real time. Every job is analyzed through an intelligent matching engine that compares your profile with each job description and assigns a relevance score, ensuring that only the most fitting opportunities reach you.</p>
      <p>Once the matches are ready, JobLancer presents a clean, focused dashboard that highlights your best options. You simply review the results, set your threshold, and the system can automatically apply to all qualifying positions on your behalf. No repetition. No wasted time. No missed opportunities.</p>
      <p>JobLancer turns the entire job-search process into a smart, automated, and personalized experience‚Äîhelping you focus less on searching and more on securing the career you deserve.</p>
    </div>
  </div>

  <main>
    <section id="upload" class="reveal">
      <h2>JobLancer Agent is ready</h2>
      <p style="color:var(--muted);margin-top:6px">Submit your resume, let the system identify suitable career opportunities, validate the matches, and auto-apply to high-scoring jobs.</p>
      <form id="jobForm">
        <div class="upload-box" id="dropzone">
          <div style="font-size:40px">üìÑ</div>
          <p>Drop your PDF resume here or click to browse</p>
          <p class="file-hint" id="fileNameHint">No file selected</p>
          <input type="file" id="fileInput" name="resume" accept=".pdf" hidden>
        </div>
        <div class="form-grid">
          <div class="field">
            <label for="jobTitle">Job Title *</label>
            <input type="text" id="jobTitle" name="job_title" placeholder="AI Engineer, Python Developer..." required>
          </div>
          <div class="field">
            <label for="jobLocation">Location (Optional)</label>
            <input type="text" id="jobLocation" name="location" placeholder="Mumbai, Remote">
          </div>
          <div class="field">
            <label for="pages">LinkedIn Pages (1-5)</label>
            <input type="number" id="pages" name="num_pages" min="1" max="5" value="2">
          </div>
          <div class="field">
            <label for="topN">Top Matches</label>
            <input type="number" id="topN" name="top_n" min="5" max="25" value="15">
          </div>
          <div class="field">
            <label for="minScoreFilter">Minimum Match Score (0-1)</label>
            <input type="number" step="0.05" id="minScoreFilter" name="min_score_filter" min="0" max="1" value="0.25">
          </div>
        </div>
        <button class="btn" id="runBtn" type="submit">üîç Search & Match Jobs</button>
        <p class="file-hint">Chrome will open - log into LinkedIn when prompted.</p>
      </form>
      
      <div id="statusPanel" class="status-card hidden">
        <h3 id="statusTitle">Status</h3>
        <p id="statusMessage"></p>
        <div class="progress-bar hidden" id="progressBar">
          <div class="progress-bar-fill" id="progressFill"></div>
        </div>
        <button class="confirm-btn hidden" id="loginConfirmBtn">Continue</button>
        <ul id="statusSteps"></ul>
      </div>
      
      <div id="results"></div>
      
      <div id="applySection" class="apply-section hidden">
        <h3>üöÄ Auto-Apply to Matched Jobs</h3>
        <p style="color:var(--muted);margin-bottom:16px">Set a threshold score. System will automatically apply to all jobs meeting or exceeding this score.</p>
        <div class="apply-controls">
          <div class="field">
            <label for="applyThreshold">Apply Threshold (0-100%)</label>
            <input type="number" id="applyThreshold" min="0" max="100" value="60" step="5">
          </div>
          <div class="field">
            <label for="maxApplications">Max Applications</label>
            <input type="number" id="maxApplications" min="1" max="30" value="10">
          </div>
          <button class="btn" id="startApplyBtn">üöÄ Start Auto-Apply</button>
        </div>
        <p id="applyPreview" style="color:var(--muted);margin-top:12px;font-size:14px"></p>
        <div id="applicationProgress" class="application-progress hidden"></div>
      </div>
    </section>
  </main>
  
  <!-- Questions Modal -->
  <div class="questions-modal" id="questionsModal">
    <div class="questions-content">
      <h2>‚ùì Additional Questions Detected</h2>
      <p>LinkedIn is asking additional questions for this job application.</p>
      <div class="job-info">
        <strong>Current Job:</strong> <span id="questionsJobTitle">Loading...</span>
      </div>
      <p style="margin-top:16px"><strong>Action Required:</strong></p>
      <ol>
        <li>Go to the Chrome browser window</li>
        <li>Answer ALL additional questions on the LinkedIn form</li>
        <li>Return here and click "Continue" below</li>
      </ol>
      <p style="color:#ffa500;margin-top:16px;font-weight:600">‚ö†Ô∏è Do NOT click Submit on LinkedIn yet - click Continue here first!</p>
      <button id="continueQuestionsBtn">Continue</button>
    </div>
  </div>
  
  <!-- Contact Section -->
  <section id="contact" class="reveal" style="max-width:1100px;margin:40px auto;padding:24px">
    <h2>Contact Us</h2>
    <p style="color:var(--muted);margin-top:10px;margin-bottom:24px">Have questions or need support? Get in touch with our team.</p>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px">
      <div class="contact-card">
        <h3 style="color:var(--accent1);margin-bottom:12px">üìß Email</h3>
        <p style="color:var(--muted)">support@joblancer.ai</p>
      </div>
      <div class="contact-card">
        <h3 style="color:var(--accent2);margin-bottom:12px">üí¨ Support</h3>
        <p style="color:var(--muted)">Available 24/7 for assistance</p>
      </div>
      <div class="contact-card">
        <h3 style="color:var(--accent3);margin-bottom:12px">üöÄ Quick Help</h3>
        <p style="color:var(--muted)">Check our documentation</p>
      </div>
    </div>
  </section>
  
  <footer>¬© 2025 JobLancer ‚Äì AI-driven job automation platform.</footer>

  <script>
    const observer=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting)e.target.classList.add('visible');});},{threshold:0.1});
    document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));

    // Theme toggle functionality
    const toggle=document.getElementById('themeToggle');
    let light=false;
    toggle.onclick=()=>{
      light=!light;
      document.body.classList.toggle('light',light);
    };

    // Logo click to scroll to resume section
    const logo = document.querySelector('.brand .logo');
    logo.addEventListener('click', () => {
      const uploadSection = document.getElementById('upload');
      if(uploadSection) {
        uploadSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });

    // Contact link scroll
    const contactLink = document.getElementById('contactLink');
    contactLink.addEventListener('click', (e) => {
      e.preventDefault();
      const contactSection = document.getElementById('contact');
      if(contactSection) {
        contactSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });

    // Sidebar functionality
    const aboutLink = document.getElementById('aboutLink');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const sidebarClose = document.getElementById('sidebarClose');
    
    function openSidebar() {
      sidebar.classList.add('open');
      sidebarOverlay.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    function closeSidebar() {
      sidebar.classList.remove('open');
      sidebarOverlay.classList.remove('show');
      document.body.style.overflow = '';
    }
    
    aboutLink.addEventListener('click', (e) => {
      e.preventDefault();
      openSidebar();
    });
    
    sidebarClose.addEventListener('click', closeSidebar);
    sidebarOverlay.addEventListener('click', closeSidebar);
    
    // Close sidebar on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && sidebar.classList.contains('open')) {
        closeSidebar();
      }
    });

    const dropzone=document.getElementById('dropzone');
    const fileInput=document.getElementById('fileInput');
    const fileNameHint=document.getElementById('fileNameHint');
    dropzone.addEventListener('click',()=>fileInput.click());
    const prevent=e=>{e.preventDefault();e.stopPropagation();};
    ['dragenter','dragover'].forEach(ev=>dropzone.addEventListener(ev,e=>{prevent(e);dropzone.classList.add('drag');}));
    ['dragleave','drop'].forEach(ev=>dropzone.addEventListener(ev,e=>{prevent(e);dropzone.classList.remove('drag');}));
    dropzone.addEventListener('drop',e=>{const file=e.dataTransfer.files[0];if(file){fileInput.files=e.dataTransfer.files;updateFileHint(file);}});
    fileInput.addEventListener('change',()=>{if(fileInput.files[0])updateFileHint(fileInput.files[0]);});
    function updateFileHint(file){fileNameHint.textContent=file?file.name:'No file selected';}

    const jobForm=document.getElementById('jobForm');
    const runBtn=document.getElementById('runBtn');
    const statusPanel=document.getElementById('statusPanel');
    const statusTitle=document.getElementById('statusTitle');
    const statusMessage=document.getElementById('statusMessage');
    const statusSteps=document.getElementById('statusSteps');
    const resultsNode=document.getElementById('results');
    const progressBar=document.getElementById('progressBar');
    const progressFill=document.getElementById('progressFill');
    const loginConfirmBtn=document.getElementById('loginConfirmBtn');
    const applySection=document.getElementById('applySection');
    const applyThreshold=document.getElementById('applyThreshold');
    const maxApplications=document.getElementById('maxApplications');
    const startApplyBtn=document.getElementById('startApplyBtn');
    const applyPreview=document.getElementById('applyPreview');
    const applicationProgress=document.getElementById('applicationProgress');
    const questionsModal=document.getElementById('questionsModal');
    const questionsJobTitle=document.getElementById('questionsJobTitle');
    const continueQuestionsBtn=document.getElementById('continueQuestionsBtn');
    
    let currentSessionId = null;
    let pollInterval = null;
    let applyPollInterval = null;
    let allMatches = [];

    function setStatus({title='Status',message='',variant='info',steps=[],progress=0,showLoginBtn=false}){
      statusPanel.classList.remove('hidden');
      statusPanel.dataset.variant=variant;
      statusTitle.textContent=title;
      statusMessage.textContent=message;
      statusSteps.innerHTML=steps.map(step=>`<li>${step}</li>`).join('');
      
      if(progress>0){
        progressBar.classList.remove('hidden');
        progressFill.style.width=progress+'%';
      }else{
        progressBar.classList.add('hidden');
      }
      
      loginConfirmBtn.classList.toggle('hidden',!showLoginBtn);
    }

    function formatPercent(value){return `${Math.round((value||0)*100)}%`;}

    async function pollJobStatus(sessionId){
      try{
        const response=await fetch(`/api/job-status/${sessionId}`);
        const data=await response.json();
        
        const variant=data.stage==='error'?'error':data.stage==='complete'?'success':data.stage.includes('waiting')?'waiting':'info';
        
        setStatus({
          title:getStageTitle(data.stage),
          message:data.message,
          variant:variant,
          steps:data.details||[],
          progress:data.progress||0,
          showLoginBtn:data.stage==='waiting_login'
        });
        
        if(data.stage==='complete'){
          clearInterval(pollInterval);
          if(data.results){
            renderResults(data.results);
          }
          runBtn.disabled=false;
        }else if(data.stage==='error'){
          clearInterval(pollInterval);
          runBtn.disabled=false;
        }
      }catch(err){
        console.error('Polling error:',err);
      }
    }

    function getStageTitle(stage){
      const titles={
        'initializing':'Initializing...',
        'waiting_login':'‚è≥ Waiting for LinkedIn Login',
        'scraping':'üîç Scraping Jobs...',
        'matching':'üéØ Matching Jobs...',
        'complete':'‚úÖ Complete!',
        'error':'‚ùå Error'
      };
      return titles[stage]||'Processing...';
    }

    loginConfirmBtn.addEventListener('click',async()=>{
      if(!currentSessionId)return;
      try{
        const response=await fetch(`/api/confirm-login/${currentSessionId}`,{method:'POST'});
        if(response.ok){
          loginConfirmBtn.classList.add('hidden');
        }
      }catch(err){
        console.error('Login error:',err);
      }
    });

    continueQuestionsBtn.addEventListener('click', async()=>{
      if(!currentSessionId) return;
      
      continueQuestionsBtn.disabled = true;
      continueQuestionsBtn.textContent = '‚è≥ Processing...';
      
      try{
        const response = await fetch(`/api/confirm-questions/${currentSessionId}`, {
          method: 'POST'
        });
        
        if(response.ok){
          questionsModal.classList.remove('show');
          continueQuestionsBtn.disabled = false;
          continueQuestionsBtn.textContent = '‚úÖ I\'ve Answered All Questions - Continue';
        }
      }catch(err){
        console.error('Questions confirmation error:', err);
        alert('Error confirming questions. Please try again.');
        continueQuestionsBtn.disabled = false;
        continueQuestionsBtn.textContent = '‚úÖ I\'ve Answered All Questions - Continue';
      }
    });

    jobForm.addEventListener('submit',async e=>{
      e.preventDefault();
      if(!fileInput.files.length){
        setStatus({title:'Resume missing',message:'Upload a PDF resume.',variant:'error'});
        return;
      }
      const formData=new FormData(jobForm);
      formData.set('resume',fileInput.files[0]);
      runBtn.disabled=true;
      resultsNode.innerHTML='';
      applySection.classList.add('hidden');
      
      setStatus({
        title:'Starting...',
        message:'Initializing session...',
        steps:['Starting Chrome','Setting up LinkedIn'],
        progress:10
      });

      try{
        const response=await fetch('/api/match-jobs-async',{method:'POST',body:formData});
        const payload=await response.json();
        
        if(payload.session_id){
          currentSessionId=payload.session_id;
          pollInterval=setInterval(()=>pollJobStatus(currentSessionId),2000);
        }else{
          throw new Error(payload.message||'Failed');
        }
      }catch(err){
        setStatus({title:'Error',message:err.message,variant:'error'});
        runBtn.disabled=false;
      }
    });

    function updateApplyPreview(){
      const threshold = applyThreshold.value / 100;
      const qualifying = allMatches.filter(m => m.final_score >= threshold).length;
      applyPreview.textContent = `Will apply to ${qualifying} job(s) with score ‚â• ${applyThreshold.value}%`;
      
      // Update badges
      document.querySelectorAll('.match-card').forEach((card, idx) => {
        const match = allMatches[idx];
        const badge = card.querySelector('.apply-badge');
        if(match.final_score >= threshold){
          badge.textContent = 'Will Apply';
          badge.className = 'apply-badge will-apply';
          badge.classList.remove('hidden');
        }else{
          badge.classList.add('hidden');
        }
      });
    }

    applyThreshold.addEventListener('input', updateApplyPreview);
    maxApplications.addEventListener('input', updateApplyPreview);

    startApplyBtn.addEventListener('click', async()=>{
      const threshold = applyThreshold.value / 100;
      const maxApply = parseInt(maxApplications.value);
      
      startApplyBtn.disabled = true;
      startApplyBtn.textContent = '‚è≥ Applying...';
      applicationProgress.classList.remove('hidden');
      applicationProgress.innerHTML = '<p>Starting applications...</p>';
      
      try{
        const response = await fetch(`/api/batch-apply/${currentSessionId}`, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            threshold: threshold,
            max_applications: maxApply
          })
        });
        
        const result = await response.json();
        
        if(result.status === 'started'){
          // Poll for application progress
          applyPollInterval = setInterval(async()=>{
            const progressRes = await fetch(`/api/apply-status/${currentSessionId}`);
            const progressData = await progressRes.json();
            
            // Check if waiting for questions
            if(progressData.waiting_for_questions === true){
              questionsJobTitle.textContent = progressData.current_job_title || 'Unknown Job';
              questionsModal.classList.add('show');
            }else{
              questionsModal.classList.remove('show');
            }
            
            if(progressData.stage === 'complete' || progressData.stage === 'error'){
              clearInterval(applyPollInterval);
              startApplyBtn.textContent = '‚úÖ Complete';
              renderApplicationResults(progressData.results);
            }else{
              renderApplicationProgress(progressData);
            }
          }, 2000);
        }
      }catch(err){
        alert(`Error: ${err.message}`);
        startApplyBtn.disabled = false;
        startApplyBtn.textContent = 'üöÄ Start Auto-Apply';
      }
    });

    function renderApplicationProgress(data){
      let html = '<h4>Application Progress</h4>';
      
      if(data.waiting_for_questions){
        html += `<div class="job-apply-status applying" style="border:2px solid #ffa500;background:rgba(255,165,0,0.2);padding:16px;margin:12px 0">
          <div style="font-size:18px;font-weight:700;color:#ffa500;margin-bottom:8px">‚è∏Ô∏è ACTION REQUIRED</div>
          <div style="margin-bottom:8px">Answering additional questions for:</div>
          <div style="font-weight:700;margin-bottom:12px">${data.current_job_title || 'Current Job'}</div>
          <div style="color:var(--muted);font-size:14px">Go to Chrome browser and answer all questions, then click Continue in the modal.</div>
        </div>`;
      }
      
      if(data.current_job && !data.waiting_for_questions){
        html += `<p style="margin:8px 0">Currently applying to: <strong>${data.current_job}</strong></p>`;
        html += `<p style="color:var(--muted);font-size:14px">Progress: ${data.completed}/${data.total}</p>`;
      }
      if(data.recent_results && data.recent_results.length > 0){
        html += '<div style="margin-top:16px"><strong>Recent Applications:</strong></div>';
        data.recent_results.forEach(result => {
          const statusClass = result.success ? 'success' : 'failed';
          const icon = result.success ? '‚úÖ' : '‚ùå';
          html += `<div class="job-apply-status ${statusClass}">
            <span>${icon} ${result.job_title}</span>
            <span>${result.success ? 'Applied' : 'Failed'}</span>
          </div>`;
        });
      }
      applicationProgress.innerHTML = html;
    }

    function renderApplicationResults(results){
      let html = '<h4>Application Summary</h4>';
      html += `<p style="margin:12px 0">Attempted: ${results.attempted} | Applied: ${results.applied} | Failed: ${results.failed}</p>`;
      
      if(results.details && results.details.length > 0){
        results.details.forEach(detail => {
          const statusClass = detail.success ? 'success' : 'failed';
          const icon = detail.success ? '‚úÖ' : '‚ùå';
          html += `<div class="job-apply-status ${statusClass}">
            <span>${icon} ${detail.job_title}</span>
            <span>${detail.success ? 'Applied' : detail.error || 'Failed'}</span>
          </div>`;
        });
      }
      
      applicationProgress.innerHTML = html;
      
      // Update card badges
      results.details.forEach((detail, idx) => {
        const card = document.querySelector(`[data-job-index="${idx}"]`);
        if(card){
          const badge = card.querySelector('.apply-badge');
          if(detail.success){
            badge.textContent = 'Applied';
            badge.className = 'apply-badge applied';
            card.classList.add('applied');
          }else{
            badge.textContent = 'Failed';
            badge.className = 'apply-badge failed';
          }
        }
      });
    }

    function renderResults(payload){
      if(payload.status==='no_jobs'){
        resultsNode.innerHTML=`<div class="status-card" data-variant="info"><h3>No jobs found</h3></div>`;
        return;
      }
      resultsNode.innerHTML='';
      if(payload.resume){
        resultsNode.appendChild(renderResumeSummary(payload.resume));
      }
      allMatches = payload.matches || [];
      resultsNode.appendChild(renderMatches(allMatches));
      
      // Show apply section
      applySection.classList.remove('hidden');
      updateApplyPreview();
    }

    function renderResumeSummary(resume){
      const card=document.createElement('div');
      card.className='resume-summary';
      
      const allSkills = resume.technical_skills || [];
      const displaySkills = allSkills.slice(0, 20);
      const remainingCount = allSkills.length - displaySkills.length;
      
      const chips = displaySkills.map(skill=>
        `<span class="chip" style="background:rgba(79,156,247,0.15);color:#4f9cf7;font-weight:600">${skill}</span>`
      ).join('');
      
      card.innerHTML=`
        <h3 style="margin-bottom:12px">üìÑ Resume Summary</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px;margin-bottom:16px">
          <div>
            <p style="color:var(--muted);font-size:13px">Name</p>
            <p style="font-weight:600;font-size:16px">${resume.name||'Not found'}</p>
          </div>
          <div>
            <p style="color:var(--muted);font-size:13px">Email</p>
            <p style="font-weight:600;font-size:16px">${resume.email||'Not found'}</p>
          </div>
          <div>
            <p style="color:var(--muted);font-size:13px">Experience</p>
            <p style="font-weight:600;font-size:16px">${resume.years_of_experience??'Not specified'} years</p>
          </div>
        </div>
        <div style="margin-top:16px">
          <p style="color:var(--muted);font-size:13px;margin-bottom:8px">Technical Skills (${allSkills.length} total)</p>
          <div class="chips">${chips}</div>
          ${remainingCount > 0 ? `<p style="color:var(--muted);font-size:12px;margin-top:8px">+ ${remainingCount} more skills</p>` : ''}
        </div>
      `;
      return card;
    }

    function renderMatches(matches){
      const wrapper=document.createElement('div');
      wrapper.innerHTML='<h3>Top Matches</h3>';
      if(!matches.length){
        wrapper.innerHTML+='<p style="color:var(--muted)">No matches found.</p>';
        return wrapper;
      }
      const grid=document.createElement('div');
      grid.className='results-grid';
      matches.forEach((match,idx)=>{
        const card=document.createElement('div');
        card.className='match-card';
        card.setAttribute('data-job-index', idx);
        
        // Clean title - remove duplicates if title appears twice
        let title = (match.title || 'Unknown Role').trim();
        // Check if title is duplicated (e.g., "Python DeveloperPython Developer")
        const titleLength = title.length;
        if(titleLength > 0 && titleLength % 2 === 0) {
          const half = titleLength / 2;
          const firstHalf = title.substring(0, half);
          const secondHalf = title.substring(half);
          if(firstHalf === secondHalf) {
            title = firstHalf; // Remove duplicate
          }
        }
        
        // Get company - handle empty or undefined
        const company = (match.company && match.company.trim()) ? match.company.trim() : 'Company not specified';
        const location = (match.location && match.location.trim()) ? match.location.trim() : 'Location not specified';
        
        card.innerHTML=`
          <div class="apply-badge hidden"></div>
          <h3 style="font-size:18px;margin-bottom:8px">#${idx+1} ${title}</h3>
          <p style="font-weight:600;color:#4f9cf7;margin:4px 0">${company}</p>
          <p style="color:var(--muted);font-size:14px;margin:4px 0">üìç ${location}</p>
          <div class="scores" style="margin-top:12px;padding:8px;background:rgba(255,255,255,0.03);border-radius:8px">
            <p style="font-size:16px;font-weight:700;color:#26d07b;margin-bottom:4px">Match Score: ${formatPercent(match.final_score)}</p>
            <p style="font-size:13px;color:var(--muted)">Skills: ${formatPercent(match.skills_score)} | Experience: ${formatPercent(match.experience_score)}</p>
          </div>
          <div class="chips">
            ${(match.matched_skills||[]).slice(0,5).map(skill=>`<span class="chip" style="background:#26d07b33;color:#26d07b">‚úÖ ${skill}</span>`).join('')}
            ${(match.missing_skills||[]).slice(0,3).map(skill=>`<span class="chip" style="background:#ff6b8133;color:#ff6b81">‚ö†Ô∏è ${skill}</span>`).join('')}
          </div>
          <a href="${match.link||'#'}" target="_blank" class="btn" style="display:inline-block;margin-top:12px;padding:10px 16px;font-size:14px;text-decoration:none">Open Listing ‚Üí</a>
        `;
        grid.appendChild(card);
      });
      wrapper.appendChild(grid);
      return wrapper;
    }
  </script>
</body>
</html>